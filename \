import { allTechFetcher, supabase } from "../../utils/supabase";
import TechCard from "../../components/TechCard";
import styles from "../../styles/techs.module.scss";
import { useQuery } from "react-query";
import slider from "../../public/icons/slider.png";
import Image from "next/image";
import { useRef, useState, useEffect } from "react";
import { categoriesHandler } from "../../utils/filter";

export default function Index() {

  const { isLoading, data, isError } = useQuery("techs", allTechFetcher);

  function openFilterForm() {
    setFilterFormOpen(!filterFormOpen);
  }

  return (
    <div className={styles.container}>
      <div className={styles.cardContainer}>
        {data ? (
          data && (
            <div
              style={{
                display: "flex",
                gap: 30,
                flexWrap: "wrap",
                justifyContent: "center",
              }}
            >
              {
                data.length > 0 &&
                  data.map((item, index) => {
                    return <TechCard data={item} key={index} />;
                  })
            </div>
          )
        ) : (
          <p>Loading...</p>
        )}
      </div>
    </div>
  );
}
